(window.webpackJsonp=window.webpackJsonp||[]).push([["note-list"],{"./components/checkbox/index.jsx":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=n.n(o),i=n("../node_modules/prop-types/index.js"),a=n.n(i);function s(){return r.a.createElement("svg",{className:"icon-checkmark",xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M11,17.768l-4.884-4.884l1.768-1.768L11,14.232l8.658-8.658C17.823,3.391,15.075,2,12,2C6.477,2,2,6.477,2,12 s4.477,10,10,10s10-4.477,10-10c0-1.528-0.353-2.971-0.966-4.266L11,17.768z"}))}function c(){return r.a.createElement("svg",{className:"icon-circle",xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24"},r.a.createElement("g",{transform:"translate(2 2)"},r.a.createElement("path",{d:"m10 0c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.477-10-10-10zm0 18.5c-4.694 0-8.5-3.806-8.5-8.5s3.806-8.5 8.5-8.5 8.5 3.806 8.5 8.5-3.806 8.5-8.5 8.5z"})))}var l=function(e){var t=e.checked,n=void 0!==t&&t,o=e.onChange;return r.a.createElement("span",{className:"checkbox",role:"checkbox","aria-checked":n,onClick:o,tabIndex:"0"},r.a.createElement("span",{className:"checkbox__icon","aria-hidden":"true"},n?r.a.createElement(s,null):r.a.createElement(c,null)))};l.propTypes={checked:a.a.bool,onChange:a.a.func};t.a=l},"./note-detail/toggle-task/constants.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i}));var o={taskNode:".task-list-item",markdownRoot:"[data-markdown-root]"},r=/^(\s*)(-[ \t]+\[[xX\s]?\])/g,i=/^(\s*)(-[ \t]+\[[xX\s]?\])(.+)/gm},"./note-list/index.jsx":function(e,t,n){"use strict";n.r(t);var o=n("../node_modules/react/index.js"),r=n.n(o),i=n("../node_modules/prop-types/index.js"),a=n.n(i),s=n("../node_modules/react-virtualized/dist/es/index.js");function c(){return r.a.createElement("svg",{className:"icon-feed",xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24"},r.a.createElement("path",{d:"M2,8.667V12c5.515,0,10,4.485,10,10h3.333C15.333,14.637,9.363,8.667,2,8.667z M2,2v3.333 c9.19,0,16.667,7.477,16.667,16.667H22C22,10.955,13.045,2,2,2z M4.5,17C3.118,17,2,18.12,2,19.5S3.118,22,4.5,22S7,20.88,7,19.5 S5.882,17,4.5,17z"}))}var l,u,d=n("../node_modules/classnames/index.js"),p=n.n(d),m=n("../node_modules/lodash/lodash.js"),f=n("../node_modules/react-redux/es/index.js"),h=n("./flux/app-state.js"),v=n("./analytics/index.js"),y=n("./utils/filter-notes.js"),w=n("./utils/note-utils.js"),b=new Map,N=(l=function(e){return e.data.modificationDate},u=w.a,function(e){var t=b.get(e.id),n=l(e);if(void 0===t||n!==t.key){var o={key:n,value:u(e)};b.set(e.id,o),t=o}return t.value}),g=n("../node_modules/string-replace-to-array/string-replace-to-array.js"),x=n.n(g),E=n("./components/checkbox/index.jsx"),k=n("./note-detail/toggle-task/constants.js"),S=function(e,t){var n=t,o=0;return e.forEach((function(e){var t=e.filter,r=e.replacer;n=x()(n,t,r(o++))})),n},j={filter:k.b,replacer:function(e){return function(t){var n=/x/i.test(t);return r.a.createElement(E.a,{checked:n,key:e})}}},O=function(e){return{filter:e,replacer:function(e){return function(t){if(t.length)return r.a.createElement("span",{className:"search-match",key:e},t)}}}};function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==s.return||s.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(t,"NoteList",(function(){return B})),s.a.displayName="AutoSizer",s.b.displayName="List";var T={comfy:1,condensed:0,expanded:4};function M(e,t){var n=M.canvas||(M.canvas=document.createElement("canvas"));n.width=t;var o=n.getContext("2d");return o.font="16px arial",o.measureText(e).width}var z,q=new Map,A=(z=function(e,t,n){var o=Math.ceil(M(n,e-24)/(e-24));return 42+21*Math.min(T[t],o)},function(e,t){var n=t.noteDisplay,o=t.width;return function(t){var r=t.index,i=e[r],a=N(i).preview,s=e[r].id,c=q.get(s);if(void 0!==c){var l=R(c,4),u=l[0],d=l[1],p=l[2],m=l[3];if(u===o&&d===n&&p===a)return m}var f=z(o,n,a);return q.set(s,[o,n,a,f]),f}}),B=function(e){function t(){var e,n,o,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return o=this,r=(e=D(t)).call.apply(e,[this].concat(a)),n=!r||"object"!==_(r)&&"function"!=typeof r?I(o):r,L(I(n),"handleShortcut",(function(e){var t=e.ctrlKey,o=e.key,r=e.metaKey,i=e.shiftKey,a=t||r;return a&&i&&("ArrowUp"===o||"k"===o)?(n.props.onSelectNote(n.props.nextNote.id),e.stopPropagation(),e.preventDefault(),!1):!a||!i||"ArrowDown"!==o&&"j"!==o||(n.props.onSelectNote(n.props.prevNote.id),e.stopPropagation(),e.preventDefault(),!1)})),L(I(n),"refList",(function(e){return n.list=e})),L(I(n),"toggleShortcuts",(function(e){e?window.addEventListener("keydown",n.handleShortcut,!0):window.removeEventListener("keydown",n.handleShortcut,!0)})),L(I(n),"onPinNote",(function(e){return n.props.onPinNote(e,!e.pinned)})),n}var n,i,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),n=t,(i=[{key:"componentDidMount",value:function(){var e=this;this.recomputeHeights=Object(m.debounce)((function(){return e.list&&e.list.recomputeRowHeights()}),70,{maxWait:1e3}),this.toggleShortcuts(!0),window.addEventListener("resize",this.recomputeHeights)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.closeNote,o=t.filter,r=t.notes,i=t.onSelectNote,a=t.selectedNoteId;e.noteDisplay===this.props.noteDisplay&&e.notes===r&&e.selectedNoteContent===this.props.selectedNoteContent||this.recomputeHeights(),a!==e.selectedNoteId&&i(a),o!==e.filter&&(r.some((function(e){return e.id===a}))||n())}},{key:"componentWillUnmount",value:function(){this.toggleShortcuts(!1),window.removeEventListener("resize",this.recomputeHeights)}},{key:"render",value:function(){var e=this,t=this.props,n=t.filter,i=t.hasLoaded,a=t.selectedNoteId,l=t.onNoteOpened,u=t.onSelectNote,d=t.onEmptyTrash,f=t.noteDisplay,h=t.showTrash,v=t.notes,y=t.isSmallScreen,w=p()("note-list-items",f),b=function(e,t){var n=t.filter,o=t.noteDisplay,i=t.selectedNoteId,a=t.onNoteOpened,s=t.onSelectNote,l=t.onPinNote,u=t.isSmallScreen;return function(t){var d=t.index,f=t.rowIndex,h=t.key,v=t.style,y=e[void 0===d?f:d],w=N(y),b=w.title,g=w.preview,x=!Object(m.isEmpty)(y.data.publishURL),E=p()("note-list-item",{"note-list-item-selected":!u&&i===y.id,"note-list-item-pinned":y.pinned,"published-note":x}),k=[j,O(n)];return r.a.createElement("div",{key:h,style:v,className:E},r.a.createElement("div",{className:"note-list-item-pinner",tabIndex:"0",onClick:l.bind(null,y)}),r.a.createElement("div",{className:"note-list-item-text theme-color-border",tabIndex:"0",onClick:function(){s(y.id),a()}},r.a.createElement("div",{className:"note-list-item-title"},r.a.createElement("span",null,S(k,b)),x&&r.a.createElement("div",{className:"note-list-item-published-icon"},r.a.createElement(c,null))),"condensed"!==o&&g.trim()&&r.a.createElement("div",{className:"note-list-item-excerpt"},S(k,g))))}}(v,{filter:n,noteDisplay:f,onNoteOpened:l,onSelectNote:u,onPinNote:this.onPinNote,selectedNoteId:a,isSmallScreen:y}),g=0===v.length,x=r.a.createElement("div",{className:"note-list-empty-trash theme-color-border"},r.a.createElement("button",{type:"button",className:"button button-borderless button-danger",onClick:d},"Empty Trash"));return r.a.createElement("div",{className:p()("note-list",{"is-empty":g})},g?r.a.createElement("span",{className:"note-list-placeholder"},i?"No Notes":"Loading Notes"):r.a.createElement(o.Fragment,null,r.a.createElement("div",{className:w},r.a.createElement(s.a,null,(function(t){var n=t.height,o=t.width;return r.a.createElement(s.b,{ref:e.refList,estimatedRowSize:42+21*T[f],height:n,noteDisplay:f,notes:e.props.notes,rowCount:e.props.notes.length,rowHeight:"condensed"===f?42:A(e.props.notes,{noteDisplay:f,width:o}),rowRenderer:b,width:o})}))),!!h&&x))}}])&&C(n.prototype,i),a&&C(n,a),t}(o.Component);L(B,"displayName","NoteList"),L(B,"propTypes",{closeNote:a.a.func.isRequired,filter:a.a.string.isRequired,isSmallScreen:a.a.bool.isRequired,notes:a.a.array.isRequired,selectedNoteId:a.a.any,onNoteOpened:a.a.func.isRequired,onSelectNote:a.a.func.isRequired,onPinNote:a.a.func.isRequired,noteDisplay:a.a.string.isRequired,onEmptyTrash:a.a.any.isRequired,showTrash:a.a.bool});var H=h.a.actionCreators,U=H.closeNote,K=H.emptyTrash,J=H.loadAndSelectNote,W=H.pinNote,X=v.tracks.recordEvent;t.default=Object(f.b)((function(e){var t=e.appState,n=e.settings.noteDisplay,o=Object(y.a)(t),r=Math.max(t.previousIndex,0),i=t.note?t.note:o[r],a=Object(m.get)(i,"id",t.selectedNoteId),s=o.findIndex((function(e){return e.id===a})),c=Math.max(0,s-1),l=Math.min(o.length-1,s+1),u=o[c],d=o[l],p=i&&N(i).preview;return{filter:t.filter,hasLoaded:null!==t.notes,nextNote:u,noteDisplay:n,notes:o,prevNote:d,selectedNotePreview:p,selectedNoteContent:Object(m.get)(i,"data.content"),selectedNoteId:a,showTrash:t.showTrash}}),(function(e,t){var n=t.noteBucket;return{closeNote:function(){return e(U())},onEmptyTrash:function(){return e(K({noteBucket:n}))},onSelectNote:function(t){e(J({noteBucket:n,noteId:t})),X("list_note_opened")},onPinNote:function(t,o){return e(W({noteBucket:n,note:t,pin:o}))}}}))(B)}}]);